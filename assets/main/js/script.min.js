import{preloadImages}from"../../libs/utils.js";$=jQuery;let lenis=new Lenis;function customDropdown(){let e=document.querySelectorAll(".dropdown-custom, .dropdown-custom-select");function l(r){e.forEach(e=>{var t=e.querySelector(".dropdown-custom-menu"),o=e.querySelector(".dropdown-custom-btn");r&&e===r||(t.classList.remove("dropdown--active"),o.classList.remove("--active"))})}e.forEach(n=>{let t=n.querySelector(".dropdown-custom-btn"),o=n.querySelector(".dropdown-custom-menu");var e=n.querySelectorAll(".dropdown-custom-item");let s=n.querySelector(".value-select"),i=n.querySelector(".dropdown-custom-text"),a=n.classList.contains("dropdown-custom-select");t.addEventListener("click",function(e){e.stopPropagation(),l(n),o.classList.toggle("dropdown--active"),t.classList.toggle("--active")}),document.addEventListener("click",function(){l()}),e.forEach(r=>{r.addEventListener("click",function(e){var t,o;e.stopPropagation(),a?(e=r.textContent,i.textContent=e,n.classList.add("selected")):(e=(e=s.querySelector("img"))?e.src:"",t=s.querySelector("span").textContent,o=r.innerHTML,s.innerHTML=o,"Time"!==t.trim()&&(r.innerHTML=e?`<span>${t}</span><img src="${e}" alt="" />`:`<span>${t}</span>`)),l()})}),window.addEventListener("scroll",function(){o.closest(".header-lang")&&(o.classList.remove("dropdown--active"),t.classList.remove("--active"))})})}function hero(){$("section.hero").length<1||(document.querySelector(".swiper-banner .progress-bar"),new Swiper(".swiper-banner",{loop:!0,speed:900,effect:"fade",grabCursor:!0,watchSlidesProgress:!0,mousewheelControl:!0,keyboardControl:!0,navigation:{nextEl:".swiper-banner .swiper-next",prevEl:".swiper-banner .swiper-prev"},pagination:{el:".swiper-banner .swiper-pagination",type:"progressbar"},autoplay:{delay:5e3,disableOnInteraction:!1},on:{init:function(e){var t=e.slides[e.activeIndex].querySelector(".slide-banner img");t&&(t.style.transform="scale(1.1)",setTimeout(function(){t.style.transition="transform 5000ms ease-out",t.style.transform="scale(1)"},50))},setTransition:function(e,t){var o="cubic-bezier(0.25, 0.1, 0.25, 1)";e.slides.forEach(function(e){e.style.transition=t+"ms "+o;e=e.querySelector(".slide-banner");e&&(e.style.transition=t+"ms "+o)})},slideChangeTransitionStart:function(e){e.slides.forEach(function(e){e=e.querySelector(".slide-banner img");e&&(e.style.transform="scale(1.1)")})},slideChangeTransitionEnd:function(e){e=e.slides[e.activeIndex].querySelector(".slide-banner img");e&&(e.style.transition="transform 5000ms ease-out",e.style.transform="scale(1)")}}}),0<$("section.hero").length&&0<$("section.intro").length&&991<$(window).width()&&ScrollTrigger.create({start:0,end:"max",onUpdate:e=>{var t=1.4*window.innerHeight;e.scroll()>=t?$(".hero").addClass("hidden-section"):$(".hero").removeClass("hidden-section")}}))}function swiperNews(){var e,t;$(".news-slider").length<1||(e=new Swiper(".news-slider-text",{effect:"fade",loop:!0,slidesPerView:1,speed:900}),t=new Swiper(".news-slider",{loop:!0,speed:900,effect:"fade",grabCursor:!0,watchSlidesProgress:!0,mousewheel:!0,keyboard:!0,allowTouchMove:!1,navigation:{nextEl:".news .swiper-button-next",prevEl:".news .swiper-button-prev"},controller:{control:e}}),e.controller.control=t,$(".news-mobile").length<1)||new Swiper(".news-mobile",{slidesPerView:1,navigation:{nextEl:".news-mobile-wrapper .swiper-button-next",prevEl:".news-mobile-wrapper .swiper-button-prev"}})}function sectionAwards(){$(".section-awards").length<1||(document.querySelectorAll(".section-awards").forEach(e=>{var t=e.querySelector(".awards-slider"),o=e.id.includes("awards");new Swiper(t,{slidesPerView:o?2:4,spaceBetween:30,loop:!1,speed:800,autoplay:!1,navigation:{prevEl:e.querySelector(".arrow-prev"),nextEl:e.querySelector(".arrow-next")},breakpoints:{1024:{slidesPerView:o?"auto":4,spaceBetween:24},768:{slidesPerView:o?"auto":3,spaceBetween:24},480:{slidesPerView:o?1:2,spaceBetween:24},0:{slidesPerView:1,spaceBetween:24}}})}),gsap.utils.toArray(".section-awards").forEach(e=>{var t=e.querySelectorAll(".news-item");gsap.set(t,{y:40,opacity:0}),gsap.timeline({scrollTrigger:{trigger:e,start:"top 70%",end:"bottom bottom",toggleActions:"play none none none"}}).to(t,{y:0,opacity:1,duration:.6,ease:"power2.out",stagger:.2})}))}function hideMenuOnFooter(){gsap.registerPlugin(ScrollTrigger),0<$(".chat-button").length&&ScrollTrigger.create({trigger:"body",start:"top top-=180vh",end:"bottom bottom",onEnter:()=>{document.querySelector(".chat-button").classList.add("show-chat")},onLeaveBack:()=>{document.querySelector(".chat-button").classList.remove("show-chat")}}),0<$(".menu-fixed-bottom").length&&(ScrollTrigger.create({trigger:"body",start:"top top-=180vh",end:"bottom bottom",onEnter:()=>{document.querySelector(".menu-fixed-bottom").classList.add("show-menu-fixed")},onLeaveBack:()=>{document.querySelector(".menu-fixed-bottom").classList.remove("show-menu-fixed")}}),ScrollTrigger.create({trigger:"footer",start:"top bottom+=50",end:"bottom bottom",onEnter:()=>{document.querySelector(".menu-fixed-bottom").classList.add("hide-menu-fixed")},onLeaveBack:()=>{document.querySelector(".menu-fixed-bottom").classList.remove("hide-menu-fixed")}})),gsap.fromTo(".footer-main",{y:100},{y:0,ease:"none",scrollTrigger:{trigger:"body",start:()=>`bottom-=${document.querySelector("footer").offsetHeight} bottom`,end:"bottom bottom",scrub:!0,toggleActions:"play reverse play reverse",invalidateOnRefresh:!0}})}function magicCursor(){if(!(window.innerWidth<1024)){let s=document.querySelector(".magic-cursor");if(s){let o=s.querySelector(".cursor"),r=s.querySelector(".cursor .text"),t=void gsap.set(s,{xPercent:-50,yPercent:-50}),n;window.addEventListener("mousemove",e=>{t=e.clientX,n=e.clientY,gsap.to(s,{x:t,y:n,duration:.1})}),document.addEventListener("mouseenter",function(t){if(t=t.target instanceof Element?t.target.closest("[data-cursor-text], .modal"):null){let e="";e=t.classList.contains("modal")?"en-US"===lang?"Close":"zh-CN"===lang?"关闭":"Đóng":t.dataset.cursorText||"",r.innerHTML=`<span class="color-white">${e}</span>`,o.classList.add("show-text")}},!0),document.addEventListener("mouseleave",function(e){(e.target instanceof Element?e.target.closest("[data-cursor-text], .modal"):null)&&(r.innerHTML="",o.classList.remove("show-text"))},!0),document.addEventListener("mouseenter",function(e){(e.target instanceof Element?e.target.closest(".modal-dialog"):null)&&o.classList.remove("show-text")},!0),document.addEventListener("mouseleave",function(e){(e.target instanceof Element?e.target.closest(".modal-dialog"):null)&&(r.innerHTML='<span class="color-white">Đóng</span>',o.classList.add("show-text"))},!0)}}}function fieldSuggestion(){function o(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/đ/g,"d").replace(/Đ/g,"D")}function r(e,t){e.find("li").each(function(){var e=o($(this).text().toLowerCase());$(this).toggle(e.includes(t))})}$(".field-suggestion input").on("focus",function(){var e=$(this).siblings(".field-suggestion__list");$(".field-suggestion__list").addClass("hidden"),e.removeClass("hidden"),r(e,"")}),$(".field-suggestion input").on("input",function(){var e=o($(this).val().toLowerCase()),t=$(this).siblings(".field-suggestion__list");r(t,e),t.removeClass("hidden")}),$(".field-suggestion").on("click","li",function(){var e=$(this).text(),t=(console.log(e),$(this).closest(".field-suggestion").find("input"));console.log(t),t.val(e),$(this).parent().addClass("hidden")}),$(document).on("click",function(e){$(e.target).closest(".field-suggestion").length||$(".field-suggestion__list").addClass("hidden")})}function parallaxSwiper(){document.querySelector(".media-list")&&new Swiper(".media-list",{centeredSlides:!0,slidesPerView:1.2,initialSlide:1,speed:900,parallax:!0,loop:!0,spaceBetween:8,autoplay:{delay:2e3},navigation:{nextEl:".media .swiper-button-next",prevEl:".media .swiper-button-prev"},breakpoints:{991:{slidesPerView:1.7,autoplay:!1,spaceBetween:32}}})}function headerMobile(){if(!(991<window.innerWidth)){let e=document.querySelector(".hamburger"),t=document.querySelector(".header-main"),o=document.querySelector(".header-menu ul li.menu-item-has-children .sub-menu");e.addEventListener("click",()=>{e.classList.toggle("active"),t.classList.toggle("active"),o.classList.remove("show")}),document.querySelectorAll(".header-menu ul li.menu-item-has-children").forEach(t=>{var e=t.querySelector("a");let o=t.querySelector("ul");e&&e.addEventListener("click",e=>{e.preventDefault(),t.classList.toggle("active"),o&&o.classList.toggle("show")});e=t.querySelector(".sub-menu-back");e&&e.addEventListener("click",()=>{o&&o.classList.remove("show"),t.classList.remove("active")})})}}function effectText(){gsap.registerPlugin(ScrollTrigger,SplitText);let o=window.innerWidth<=991;function r(e,t=0){gsap.fromTo(e,{opacity:0,y:20,willChange:"opacity, transform"},{opacity:1,y:0,duration:.6,ease:"sine.out",delay:t,scrollTrigger:{trigger:e,start:"top 80%",end:"bottom 80%"}})}gsap.utils.toArray(".data-fade-in").forEach(e=>{var t=parseFloat(e.getAttribute("data-delay"))||0;r(e,t)}),gsap.utils.toArray(".effect-line-auto").forEach(e=>{var t=parseFloat(e.getAttribute("data-delay"))||0;o?r(e,t):(e=new SplitText(e,{type:"lines",linesClass:"line",mask:"lines"}),gsap.fromTo(e.lines,{yPercent:100,willChange:"transform"},{yPercent:0,duration:1,ease:"power3.out",stagger:.05,delay:t}))}),gsap.utils.toArray(".effect-line").forEach(e=>{var t;o?r(e):(t=new SplitText(e,{type:"lines",linesClass:"line",mask:"lines"}),gsap.fromTo(t.lines,{yPercent:100,willChange:"transform"},{yPercent:0,duration:1,ease:"power3.out",stagger:.05,scrollTrigger:{trigger:e,start:"top 80%"}}))}),gsap.utils.toArray(".effect-line-box").forEach(e=>{var t;o?r(e):(t=new SplitText(e,{type:"lines",linesClass:"line",mask:"lines"}),gsap.fromTo(t.lines,{yPercent:100,willChange:"transform"},{yPercent:0,duration:1,ease:"power3.out",scrollTrigger:{trigger:e,start:"top 80%"}}))}),gsap.utils.toArray(".effect-title-auto").forEach(e=>{var t=parseFloat(e.getAttribute("data-delay"))||0,e=SplitText.create(e,{type:"words,chars",mask:"words"});gsap.set(e.chars,{y:"125%"}),gsap.to(e.chars,{y:"0%",ease:"power3.out",duration:1,stagger:.03,delay:t})}),gsap.utils.toArray(".effect-title").forEach(e=>{var t=parseFloat(e.getAttribute("data-delay"))||0,o=new SplitText(e,{type:"chars, words",charsClass:"char",mask:"chars"});gsap.set(o.chars,{y:"125%",opacity:0}),gsap.to(o.chars,{y:"0%",opacity:1,ease:"power3.out",duration:1,stagger:.03,delay:t,scrollTrigger:{trigger:e,start:"top 80%",toggleActions:"play none none none"}})}),gsap.registerPlugin(ScrollTrigger,SplitText),document.querySelectorAll(".scroll-wrap-item").forEach(e=>{var t,o=e.querySelector(".scroll-wrap-image"),r=e.querySelector(".title-box"),n=e.querySelector(".description-box"),s=e.querySelector(".btn-view-all"),i=window.innerWidth<=991,e=gsap.timeline({scrollTrigger:{trigger:e,start:i?"top 85%":"top 62%",toggleActions:"play none none none"}});o&&(gsap.set(o,{opacity:0,y:30}),e.to(o,{opacity:1,y:0,duration:.8,ease:"power2.out"})),r&&(o=parseFloat(r.getAttribute("data-delay"))||0,t=new SplitText(r,{type:"chars,words",charsClass:"char",mask:"chars"}),gsap.set(t.chars,{y:"125%",opacity:0}),i?gsap.to(t.chars,{y:"0%",opacity:1,duration:1,ease:"power3.out",stagger:.03,scrollTrigger:{trigger:r,start:"top 85%",toggleActions:"play none none none"}}):e.to(t.chars,{y:"0%",opacity:1,duration:1,ease:"power3.out",stagger:.03},"-="+(.8-o))),n&&(parseFloat(n.getAttribute("data-delay")),gsap.set(n,{opacity:0,y:30}),i?gsap.to(n,{opacity:1,y:0,duration:.8,ease:"power3.out",scrollTrigger:{trigger:n,start:"top 85%",toggleActions:"play none none none"}}):e.to(n,{opacity:1,y:0,duration:1,ease:"power3.out",delay:.2},"<")),s&&(r=parseFloat(s.getAttribute("data-delay"))||0,gsap.set(s,{opacity:0,y:20}),i?gsap.to(s,{opacity:1,y:0,duration:.3,ease:"none",scrollTrigger:{trigger:s,start:"top 85%",toggleActions:"play none none none"}}):e.to(s,{opacity:1,y:0,duration:.3,ease:"none",delay:r},"<"))})}function searchIconShopping(){if(!(991<window.innerWidth)){var t=document.querySelector(".icon-menu-mobile");let e=document.querySelector(".shopping-search-main");t.addEventListener("click",()=>{e.classList.toggle("active")})}}lenis.on("scroll",ScrollTrigger.update),gsap.ticker.add(e=>{lenis.raf(1e3*e)}),gsap.ticker.lagSmoothing(0);let init=()=>{gsap.registerPlugin(ScrollTrigger),customDropdown(),hero(),swiperNews(),sectionAwards(),hideMenuOnFooter(),magicCursor(),fieldSuggestion(),parallaxSwiper(),headerMobile(),effectText()},isLinkClicked=(preloadImages("img").then(()=>{init()}),!1);$("a").on("click",function(e){!this.href||this.href.match(/^#/)||this.href.match(/^javascript:/)||(isLinkClicked=!0,console.log("1"))}),$(window).on("beforeunload",function(){isLinkClicked||$(window).scrollTop(0),isLinkClicked=!1});