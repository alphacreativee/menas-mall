import{preloadImages}from"../../libs/utils.js";$=jQuery;let lenis=new Lenis;function customDropdown(){let e=document.querySelectorAll(".dropdown-custom, .dropdown-custom-select");function a(r){e.forEach(e=>{var n=e.querySelector(".dropdown-custom-menu"),t=e.querySelector(".dropdown-custom-btn");r&&e===r||(n.classList.remove("dropdown--active"),t.classList.remove("--active"))})}e.forEach(o=>{let n=o.querySelector(".dropdown-custom-btn"),t=o.querySelector(".dropdown-custom-menu");var e=o.querySelectorAll(".dropdown-custom-item");let s=o.querySelector(".value-select"),i=o.querySelector(".dropdown-custom-text"),l=o.classList.contains("dropdown-custom-select");n.addEventListener("click",function(e){e.stopPropagation(),a(o),t.classList.toggle("dropdown--active"),n.classList.toggle("--active")}),document.addEventListener("click",function(){a()}),e.forEach(r=>{r.addEventListener("click",function(e){var n,t;e.stopPropagation(),l?(e=r.textContent,i.textContent=e,o.classList.add("selected")):(e=(e=s.querySelector("img"))?e.src:"",n=s.querySelector("span").textContent,t=r.innerHTML,s.innerHTML=t,"Time"!==n.trim()&&(r.innerHTML=e?`<span>${n}</span><img src="${e}" alt="" />`:`<span>${n}</span>`)),a()})}),window.addEventListener("scroll",function(){t.closest(".header-lang")&&(t.classList.remove("dropdown--active"),n.classList.remove("--active"))})})}function hero(){$("section.hero").length<1||(document.querySelector(".swiper-banner .progress-bar"),new Swiper(".swiper-banner",{loop:!0,speed:900,effect:"fade",grabCursor:!0,watchSlidesProgress:!0,mousewheelControl:!0,keyboardControl:!0,navigation:{nextEl:".swiper-banner .swiper-next",prevEl:".swiper-banner .swiper-prev"},pagination:{el:".swiper-banner .swiper-pagination",type:"progressbar"},autoplay:{delay:5e3,disableOnInteraction:!1},on:{init:function(e){var n=e.slides[e.activeIndex].querySelector(".slide-banner img");n&&(n.style.transform="scale(1.1)",setTimeout(function(){n.style.transition="transform 5000ms ease-out",n.style.transform="scale(1)"},50))},setTransition:function(e,n){var t="cubic-bezier(0.25, 0.1, 0.25, 1)";e.slides.forEach(function(e){e.style.transition=n+"ms "+t;e=e.querySelector(".slide-banner");e&&(e.style.transition=n+"ms "+t)})},slideChangeTransitionStart:function(e){e.slides.forEach(function(e){e=e.querySelector(".slide-banner img");e&&(e.style.transform="scale(1.1)")})},slideChangeTransitionEnd:function(e){e=e.slides[e.activeIndex].querySelector(".slide-banner img");e&&(e.style.transition="transform 5000ms ease-out",e.style.transform="scale(1)")}}}),0<$("section.hero").length&&0<$("section.intro").length&&991<$(window).width()&&ScrollTrigger.create({start:0,end:"max",onUpdate:e=>{var n=1.4*window.innerHeight;e.scroll()>=n?$(".hero").addClass("hidden-section"):$(".hero").removeClass("hidden-section")}}))}function swiperNews(){var e,n;$(".news-slider").length<1||(e=new Swiper(".news-slider-text",{effect:"fade",loop:!0,slidesPerView:1,speed:900}),n=new Swiper(".news-slider",{loop:!0,speed:900,effect:"fade",grabCursor:!0,watchSlidesProgress:!0,mousewheel:!0,keyboard:!0,allowTouchMove:!1,navigation:{nextEl:".news .swiper-button-next",prevEl:".news .swiper-button-prev"},controller:{control:e}}),e.controller.control=n,$(".news-mobile").length<1)||new Swiper(".news-mobile",{slidesPerView:1,navigation:{nextEl:".news-mobile-wrapper .swiper-button-next",prevEl:".news-mobile-wrapper .swiper-button-prev"}})}lenis.on("scroll",ScrollTrigger.update),gsap.ticker.add(e=>{lenis.raf(1e3*e)}),gsap.ticker.lagSmoothing(0);let init=()=>{gsap.registerPlugin(ScrollTrigger),customDropdown(),hero(),swiperNews()},isLinkClicked=(preloadImages("img").then(()=>{init()}),!1);$("a").on("click",function(e){!this.href||this.href.match(/^#/)||this.href.match(/^javascript:/)||(isLinkClicked=!0,console.log("1"))}),$(window).on("beforeunload",function(){isLinkClicked||$(window).scrollTop(0),isLinkClicked=!1});